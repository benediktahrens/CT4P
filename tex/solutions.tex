\section{Solutions}
\label{sec:solutions}

\begin{solution}[\cref{exer:post_antisymmetry}]\label{sol:post_antisymmetry}
The inequality $x\leq y$ (resp. $y\leq x$) means that we have a (unique) morphism from $f\in \Hom{x}{y}$ (resp. $g\in \Hom{y}{x}$). Consequently, we get a \textit{loop} $\co{f}{g} \in \Hom{x}{x}$. Since the hom-sets are either empty or a singleton, we have $\co{f}{g} = \Id[x]$. Hence, antisymmetry means that if $\Id[X] = \co{f}{g}$ for some $f\in \Hom{x}{y}$ and $g\in \Hom{y}{x}$, we must have 
\[x=y,\quad f = \Id[x] = g.\]
Rephrased a little bit different, we get: The category $\PRE(X,\leq)$ has no non-trivial loops if $(X,\leq)$ is antisymmetric.
\end{solution}

\begin{solution}[\cref{exer:POS_isnt_a_posetcat}]\label{sol:POS_isnt_a_posetcat}
That $\POS$ would be a preorder-category means that each of the hom-sets is either empty or a singleton. Hence, it is not a preorder-category if there exists $(X,\leq_X)$ and $(Y,\leq_Y)$ such that $\CHom{\POS}{(X,\leq_X)}{(Y,\leq_Y)}$ has more then one element.\\
We choose $(X,\leq) := (\mathbb{N},\leq) =: (Y,\leq)$. A morphism $f\in \CHom{\POS}{(\mathbb{N},\leq)}{(\mathbb{N},\leq)}$ consists of a function $f:\mathbb{N}\to\mathbb{N}$ such that the following property holds:
\[
\forall n,m\in\mathbb{N}: n\leq m \implies f(n)\leq f(m).
\]
But there are a lot of functions from $\mathbb{N}$ to $\mathbb{N}$ which satisfies this property, indeed: For any $k\in\mathbb{N}$, we have that
\[
f_k : \mathbb{N}\to\mathbb{N}: n\mapsto n+k,
\]
is a morphism in $\POS$. Hence $\CHom{\POS}{(\mathbb{N},\leq)}{(\mathbb{N},\leq)}$ consists of an infinite amount of distinct morphisms.
\end{solution} 

\begin{solution}[\cref{exer:categories_coming_from_monoids}]\label{sol:categories_coming_from_monoids}
A category $\CC$ is of the form $(M,m,e)$ if and only if $\CC$ has a unique object. Indeed, if $\CC$ has a unique object, lets denote this by $X$, then we can define a monoid $(M,m,e)$ as follows:
\begin{itemize}
\item The underlying set of the monoid is $M := \CHom{\CC}{X}{X}$.
\item The multiplication $m$ is given by $m(f,g) := \co{f}{g}$.
\item The identity element $e$ is given by $e := \Id[X]$.
\end{itemize}
That $(M,m,e)$ is indeed a monoid, i.e. satisfies the monoid laws, is just a translation of the axioms of $\CC$ being a category.
\end{solution}

\begin{solution}[\cref{exer:category_of_monoids}]\label{sol:category_of_monoids}
Since a monoid consists of a set $M$ together with a binary operation $m:M\to M\to M$ (called the \textit{multiplication}) and a \textit{identity} element $e\in M$, a suitable \textit{morphism of monoids}, from $(M_1,m_1,e_1)$ to $(M_2,m_2,e_2)$ should consists of a function $f:M\to N$ which preserves the structure (i.e. the multiplication and the identity element). More precisely:
\begin{itemize}
\item Preservation of the multiplication:
\[
\forall x,y\in M_1: f(m_1(x,y)) = m_2(f(x), f(y)).
\]
\item Preservation of the identity:
\[
f(e_1) = e_2.
\]
\end{itemize}
We will now prove that the monoids (as objects) and morphisms of monoids (as the morphisms) carry the data of a category, i.e. we have to define identity morphisms and the composition of morphisms:
\begin{itemize}
\item Let $(M,m,e)$ be a monoid. The identity morphism is given by the identity function $\Id[M]$ on the underlying set $M$. 
\item Let $(M_i,m_i,e_i)$ be a monoid for $i=1,2,3$ and let 
\[ 
f:(M_1,m_1,e_1)\to (M_2,m_2,e_2),\quad g:(M_2,m_2,e_2)\to (M_3,m_3,e_3)
\] 
be morphisms of monoids. The composition $\co{f}{g}$ of $f$ and $g$ is defined as the composition of the underlying functions.
\end{itemize}
Before we show that this data satisfies the properties of a category, we first have to show that everything is well-defined, i.e. that the identity is a morphism of monoids and that the composition of morphisms of monoids is again a morphism of monoids:
\begin{itemize}
\item That the identity is a morphism of monoids follows by the following calculations:
\begin{eqnarray*}
\forall x,y\in M &:& \Id[M](m(x,y)) = m(x,y) = m(\Id[M](x),\Id[M](y)),\\
&& \Id[M](e) = e.
\end{eqnarray*}
The equalities holds because $\Id[M]$ is the identity function on $M$.
\item That the composition of morphism of monoids is again a morphism of monoids follows by the following calculations:
\begin{itemize}
\item Composition preserves multiplication: for any $x,y \in M_1$, we have
\begin{eqnarray*}
 \co{f}{g}(m_1(x,y)) &=& g\left(f(m_1(x,y))\right)\\ 
	&=& g\left(m_2(f(x),f(y)))\right) \quad \text{ ($f$ preserves mult.)} \\
	&=& m_3(g(f(x)),g(f(y))) \quad \text{ ($g$ preserves mult.)}\\
	&=& m_3(\co{f}{g}(x),\co{f}{g}(y))
\end{eqnarray*}
Composition preserves identity element by:
\[
\co{f}{g}(e_1) = g(f(e_1)) = g(e_2) = e_3,
\]
where the second (resp. third) equality holds since $f$ (resp. $g$) preserves the identity element.
\end{itemize}
\end{itemize}
So everything is indeed well-defined. So we are now ready to show that composition of some morphism of monoids $f$ with the identity morphism is again $f$ (both on the left and right) and that the composition of morphisms of monoids is associative. This follows immediate since everything is defined using functions and we know that functions satisfy these properties.
\end{solution}

\begin{solution}[\cref{exer:category_with_naturalnumbers_and_matrices}]
  \label{sol:category_with_naturalnumbers_and_matrices}
  In order to make $\mathcal{C}$ into a category, we have to define the identity morphisms and the composition of morphisms.
  
  Let $n\in \mathbb{N} =: \Ob{\CC}$ be a natural number. The identity on $n$ is an element in $\CHom{\CC}{n}{n}$, which is the set of $n\times n$-matrices. Hence, for the identity on $n$, we can take $\Id[n]$ to be the identity $n\times n$-matrix, i.e. all coefficients are zero except on the diagonal where everything is $1$.
  
Let $l,m,n \in\mathbb{N}$ be natural numbers and $M$ (resp. $N$) be a $l\times m$-matrix (resp. $m\times n$-matrix). The composition $\co{M}{N}$ should be an $l\times n$-matrix, hence we define $\co{M}{N}$ as the matrix multiplication of $M$ and $N$, i.e. $\co{M}{N} = M\cdot N$.\\
That this data satisfies the properties of being a category follows immediate because matrix multiplication is associative and that the multiplication of any matrix $M$ with the identity matrix (of the right size and both on the left or on the right) is again $M$.
\end{solution}

\begin{solution}[\cref{exer:opposite}]\label{sol:opposite}
  In order to avoid confusion, we use the following notation: For any $f\in\CHom{\CC}{X}{Y}$ morphism, we denote by $\op{f}$ the corresponding morphism in $\CHom{\op\CC}{Y}{X}$.
  
  Let $X\in \Ob{\op\CC} = \Ob{\CC}$. The identity morphism is defined as the morphism corresponding to the identity, i.e. it is $\op{(\Id[X])}$.
  
  Let $\op{g} \in \CHom{\op\CC}{Z}{Y}, \op{f}\in \CHom{\op\CC}{Y}{X}$. The composition is defined as: $\co{\op g}{\op f} := \op{(\co{f}{g})}$.
  
That this data satisfies the properties of a category, follows because $\CC$ is a category, indeed:
\begin{itemize}
\item That the left unit law holds follows by the right unit law of $\CC$ as follows:
\[
\co{\op{\Id}}{\op{f}} = \op{(\co{f}{\Id})} = \op{f},
\]
where the first equality holds by definition of the \textit{opposite composition} and the second holds by the right unit law of $\CC$.\\
The right unit law holds analoguously by the left unit law of $\CC$.
\item That the associativity holds follows by the associativity of $\CC$ as follows:
\begin{eqnarray*}
\co{\op{h}}{(\co{\op g}{\op f})} &=& \co{\op{h}}{\op{(\co{f}{g})}}\\
 	&=& \op{(\co{(\co{f}{g})}{h})}\\ 
 	&=& \op{(\co{f}{(\co{g}{h})})} \text{ by associativity of $\CC$},\\
 	&=& \co{\op{(\co{g}{h})}}{\op f}\\
 	&=& \co{(\co{\op h}{\op g})}{\op f}
\end{eqnarray*}
\end{itemize}
\end{solution}

\begin{solution}[\cref{exer:connection_graphs_preordersets}]\label{sol:connection_graphs_preordersets}
Any preordered set $(X,\leq)$ can be described by a graph where the vertices are given by the elements of $X$ and there exists an edge from $x$ to $y$ if and only if $x \leq y$. Hence, if we denote by $G$ the corresponding graph of $(X,\leq)$, we have that $\POS(X,\leq) = \mathbf{Graph}(G)$.\\
In particular we have that the number of edges is either $0$ or $1$. Hence, a category generated by a graph comes from a preordered set if and only if the number of morphisms in any fixed hom-set is either $0$ or $1$.

If $(X,\leq)$ is a poset, i.e. we have antisymmetry, then we have that the corresponding graph (and consequently the corresponding category) have no (non-trivial) loops.
\end{solution}


%% Section on isomorphisms
\begin{solution}[\cref{exer:inverse-iso}]\label{sol:inverse-iso}
That $f:a\to b$ is an isomorphism with inverse $g$ means precisely that $\co{f}{g} = \Id[a]$ and $\co{g}{f} = \Id[b]$. But stating that $g$ is an isomorphism with inverse $f$ means precisely those conditions. Hence, this hold by definition.
\end{solution}

\begin{solution}[\cref{exer:inverse_uniqueness}]\label{sol:inverse_uniqueness}
Let $f:a\to b$ be an isomorphism. That $f$ has a unique inverse means that if $g,h : b\to a$ are morphisms such that 
\[
\co{f}{g} = \Id[a], \co{g}{f} = \Id[b], \co{f}{h} = \Id[a], \co{h}{f} = \Id[b]
\]
then we must have $g = h$.\\
So assume $g$ and $h$ satisfy the condition of being an inverse of $f$. Then we have:
\begin{eqnarray*}
g =& \co{g}{\Id[b]} &,\text{ by left unit law},\\
	=& \co{g}{(\co{f}{h})} &, \text{ since $h$ is inverse of $f$},\\
	=& \co{(\co{g}{f})}{h} &, \text{ by associativity},\\
	=& \co{\Id[a]}{h} &, \text{ since $g$ is inverse of $f$}\\
	=& h &, \text{ by right unit law}
\end{eqnarray*}
\end{solution}

\begin{solution}[\cref{exer:compofiso}]\label{sol:compofiso}
Let $f: a\to b$ and $g:b\to c$ be isomorphisms. Denote their (unique) inverses by $f^{-1}$ and $g^{-1}$. We have to show that there exists a morphism $h : c\to a$ such that 
\[
\co{(\co{f}{g})}{h} = \Id[a], \quad \co{h}{(\co{f}{g})} = \Id[c].
\]
We define $h := \co{g^{-1}}{f^{-1}}$. The left equality then holds by the following computation:
\begin{eqnarray*}
\co{(\co{f}{g})}{h} =& \co{(\co{f}{g})}{(\co{g^{-1}}{f^{-1}})} &\\
	=& \co{f^{-1}}{\co{(\co{g}{g^{-1}})}{f}} &\text{ by associativity,}\\
	=& \co{f^{-1}}{\co{\Id[b]}{f}} &\text{ since $g^{-1}$ inverse of $g$,}\\
	=& \co{f^{-1}}{f} &\text{ by unit law,}\\
	=& \Id[a] &\text{ since $f^{-1}$ inverse of $f$.}
\end{eqnarray*}
The right equality holds analoguously.
\end{solution}


\begin{solution}[\cref{exer:iso-bool}]\label{sol:iso-bool}
The Haskell datatype |Bool| is given by:
\begin{lstlisting}
data Bool = True | False
\end{lstlisting}
In order to construct a (Haskell) function $f$ from |BW| to |Bool|, it suffices to define $f(Black)$ and $f(White)$.\\
The first isomorphism, denoted by $f_1$, is given by $f_1(Black)=True$ and $f_1(White) = False$. Its inverse (denoted by $g_1$) is given by $g_1(True) = Black$ and $g_1(False) = White$. To show that these are inverse, we have to show 
\[
g_1 (f_1 (White)) = White, \quad g_1 (f_1 (Black)) = Black.
\]
These equalities holds by definition of $f_1$ and $g_1$.\\
The second isomorphism, denoted by $f_2$, is given by $f_2(Black)=False$ and $f_2(White) = True$. Its inverse (denoted by $g_2$) is given by $g_2(False) = Black$ and $g_1(True) = White$. That $g_2$ is the inverse of $f_2$ is also immediate.
\end{solution}

\begin{solution}[\cref{exer:iso_in_sets}]\label{sol:iso_in_sets}
The isomorphisms in $\SET$ are precisely the bijective functions, indeed:
\begin{itemize}
\item Assume $f: X\to Y$ is a bijection, i.e.
\[
\forall y\in Y: \exists! x_{y}\in X: f(x)=y 
\]
We show that the inverse of $f$ is given by:
\[
g : Y\to X: y\mapsto x_y.
\]
So we have to show $\co{f}{g} = \Id[X]$ and $\co{g}{f} = \Id[Y]$. Let $x\in X$, since that $g(f(x))$ is the unique element $z\in X$ such that $f(z) = f(x)$ (and since $x$ satisfies this condition), we have $g(f(x)) = x$. Since this holds for all $x\in X$, we have $\co{f}{g} = \Id[X]$.\\
Let $y\in Y$ and let $x := x_y$  be the unique element in $X$ such that $f(x)=y$. So by definition of $g$, we have $g(y) = x$, hence 
$f(g(y)) = f(x) = y$.
\item Assume $f:X\to Y$ is an isomorphism with inverse $f^{-1}$. Let $y\in Y$, we have to show that there exists a unique $x\in X$ such that $f(x)=y$. Define $x := g(y)$. Since $\co{g}{f} = \Id[Y]$, we have $y = f(g(y)) = f(x)$, hence, this $x$ indeed satisfies the condition. To show that $x$ is unique, let $z\in X$ satisfy $f(z)=y$. That $z=x$ now follows from $\co{f}{g} = \Id[X]$, indeed: 
$z = g(f(z)) = g(y) = x$.
\end{itemize}
\end{solution}

\begin{solution}[\cref{exer:iso_in_pos}]\label{sol:iso_in_pos}
The isomorphisms in $\POS$ are precisely the bijections $f:(X,\leq_X) \to (Y,\leq_Y)$ such that 
\begin{equation}\label{eqn:order_iso}
x_1 \leq_X x_2 \iff f(x_1) \leq_Y f(x_2),
\end{equation}
Indeed:
\begin{itemize}
\item Assume $f$ is a bijection which satisfies \cref{eqn:order_iso}. Since it is a bijection, we know (by the solution to \cref{exer:iso_in_sets}), that there exists a function $g:(Y,\leq_Y)\to (X,\leq_X)$ such that $\co{f}{g}=\Id[(X,\leq_X)]$ and $\co{g}{f}=\Id[(Y,\leq_Y)]$. However, this does not conclude the proof of the first implication, because we do not know appriori, that $g$ is a morphism of posets. So we have to show
\[
\forall y_1,y_2\in Y: y_1\leq_Y y_2 \implies g(y_1)\leq_X g(y_2).
\]
Let $y_1,y_2\in Y$. Since $f$ is bijective, there exist $x_1,x_2 \in X$ such that $f(x_1)=y_1$ and $f(x_2)=y_2$. If $f(x_1) = y_1\leq_Y y_2 = f(x_2)$, then by \cref{eqn:order_iso}, we also have that $x_1 \leq x_2$. But by definition of $g$, we have $g(y_1)=x_1$ and $g(y_2)=x_2$, hence $g(y_1)\leq_X g(y_2)$ which shows that $g$ is an order-preserving morphism, i.e. $g \in \CHom{\POS}{(Y,\leq_Y)}{(X,\leq_X)}$.
\item Assume $f$ is an isomorphism in $\POS$ with inverse $g$. Since $f$ is a function which satisfies $\co{f}{g}=\Id[(X,\leq_X)]$ and $\co{g}{f}=\Id[(Y,\leq_Y)]$, we have (by the same argument as in the solution to \cref{exer:iso_in_sets}), that $f$ is a bijection. Hence, it remains to show that \cref{eqn:order_iso} holds. Let $x_1,x_2\in X$.
  
  If $x_1\leq_X x_2$, then we have $f(x_1)\leq_Y f(x_2)$ since $f \in\CHom{\POS}{(X,\leq_X)}{(Y,\leq_Y)}$.
  
Assume $f(x_1)\leq_Y f(x_2)$. Since $g \in\CHom{\POS}{(Y,\leq_Y)}{(X,\leq_X)}$, we have $g(f(x_1)) \leq_X g(f(x_2))$. But $\co{f}{g} = \Id[X]$, hence $x_1 \leq_X x_2$.
\end{itemize}
\end{solution}

\begin{solution}[\cref{exer:iso_in_posetcategory}]\label{sol:iso_in_posetcategory}
First, let $(X,\leq_Y)$ be a preorder. A morphism $f:x\to y$ is an isomorphism if and only if there exists a morphism $g: y\to x$ such that $\co{f}{g}=\Id[x]$ and $\co{g}{f}=\Id[y]$. But, in a preorder category, each hom-set has a unique element if it is non-empty. So, for any $g\in \Hom{y}{x}$ and $f\in \Hom{x}{y}$, we always have $\co{f}{g}=\Id[x]$ and $\co{g}{f}=\Id[y]$. Hence a morphism $f:x\to y$ in a preorder-category is an isomorphism if and only if there exists a morphism $g:y\to x$. The existence of a morphism $f:x\to y$ means precisely that $x\leq y$. Hence, isomorphisms in a preorder-category corresponds with a pair of elements $(x,y)$ in $X$ such that $x\leq y$ and $y\leq x$.\\
If $(X,\leq_X)$ is a poset, i.e. satisfies antisymmetry, then if $x\leq y$ and $y\leq x$, we must have $x=y$. Consequently, in a poset-category, the only isomorphisms are the identity morphisms (i.e. corresponding with $x\leq x$).
\end{solution}


\begin{solution}[\cref{exer:section-retraction-bool-int}]\label{sol:section-retraction-bool-int}
Consider
\begin{lstlisting}
bool2Int :: Bool -> Int
bool2Int False = 0
bool2Int True  = 1
\end{lstlisting}    

We can go back, so that we get |False| and |True| from |0| and |1|:
\begin{lstlisting}
int2Bool :: Int -> Bool
int2Bool n | n == 0    = False
           | otherwise = True
\end{lstlisting}
However, notice that not only |1| is converted back to |True|, but also everything other than |0| is converted to |True|.

We have
\begin{lstlisting}
   Int2Bool (bool2Int y) = y
\end{lstlisting}
for every |y :: Bool|, but we don't have |bool2Int (int2Bool x) = x| for all |x :: Int|.

We can say that there is enough room in the type integers for it to host a copy of the type of booleans, but there isn't enough room in the type of booleans for it to host a copy of the type of integers.

But notice that there are other ways in which the type |Bool| lives inside the type |Int| as a retract: for example, we can send |False| to |13| and |True| to |17|, and then send back everything bigger than |15| to |True| and everything else to |False|.
\end{solution}




\begin{solution}[\cref{ex:mono-inj}]\label{sol:mono-inj}
The monomorphisms in $\SET$ correspond precisely with the injective functions, i.e. the functions $f:X\to Y$ which satisfy
\[
\forall x_1,x_2\in X: f(x_1)=f(x_2) \implies x_1=x_2,
\]
Indeed:
\begin{itemize}
\item Assume $f$ is injective. Let $g,h: Z\to X$ be functions such that $\co{g}{f}=\co{h}{f}$. We have to show $g=h$, i.e. 
\[
\forall z\in Z: g(z)=h(z).
\]
Since $f$ is injective, it suffices to show 
\[
\forall z\in Z: f(g(z))=f(h(z)).
\]
But this holds by the condition of $g$ and $h$. Hence, $f$ is indeed a monomorphism.
\item Assume $f$ is a monomorphism. We have to show that for each $x_1,x_2\in X$, we have $f(x_1) = f(x_2)$. Let $\mathbf{1} = \{\star\}$ be a singleton set and define
\[
g_1 : \mathbf{1}\to X: \star\mapsto x_1,\quad  g_2 : \mathbf{1}\to X: \star\mapsto x_2, 
\]
Since $f(x_1)=f(x_2)$, we have $\co{g_1}{f} = \co{g_2}{f}$. But $f$ is a monomorphism, hence $g_1 = g_2$ which means $x_1 = g_1(\star) = g_2(\star) = x_2$. Thus, $f$ is indeed injective.
\end{itemize}
\end{solution}

\begin{solution}[\cref{exer:sections_in_set_injective}]\label{sol:sections_in_set_injective}
Let $f:X\to Y$ be a section with a retraction $h:Y\to X$, i.e. $\co{f}{h} = \Id[Y]$. By \cref{ex:mono-inj}, it suffices to show that $f$ is a monomorphism. Let  $g_1, g_2 : Z \to X$ be morphisms in $\SET$ such that $\co{g_1}{f} = \co{g_2}{f}$. We have to show $g_1=g_2,$, this follows from the following computation:
\begin{eqnarray*}
g_1 =& \co{g_1}{\Id[Y]} & \text{ by unit law},\\ 
	=& \co{g_1}{\co{f}{h}} & \text{ since $f$ section},\\ 
	=& \co{\co{g_1}{f}}{h} & \text{ by associativity},\\
	=&  \co{\co{g_2}{f}}{h} & \text{ by assumption},\\
	=& \co{g_2}{\co{f}{h}} & \text{ by associativity},\\ 
	=& \co{g_2}{\Id[Y]} & \text{ since $f$ section},\\
	=& g_2 & \text{ by unit law}.
\end{eqnarray*}
Notice that this proof shows that in an arbitrary category, a section is always a monomorphism.
\end{solution}

\begin{solution}[\cref{exer:iso_to_monoepi}]\label{sol:iso_to_monoepi}
Let $f : a\cong b$ be an isomorphism with inverse $f^{-1}$. There are multiple proofs which one can give, an abstract one (which is \textit{indirect} in the sense that we use another exercise/lemma) and a more \textit{direct} one.
\begin{itemize}
\item \textbf{Indirect proof:} By the solution of \ref{exer:sections_in_set_injective}, we know that any section (from a section-retraction pair) is a monomorphism. An analoguous argument shows that any retraction (section-retraction pair) is an epimorphism. Hence it suffices to show that $f$ is both a section and a retraction, but this is immediate because $\co{f}{f^{-1}} = \Id[a]$ and $\co{f^{-1}}{f} = \Id[b]$.
\item \textbf{Direct proof:} We first show that $f$ is a monomorphism. Assume $g_1,g_2 : c\to a$ are morphisms such that $\co{g_1}{f} = \co{g_2}{f}$. We then have that $g_1 = g_2$ because 
\begin{eqnarray*}
g_1 = \co{g_1}{\Id[a]} =& \co{g_1}{(\co{f}{f^{-1}})} & \text{ since $f : a\cong b$},\\ 
	=& \co{(\co{g_1}{f})}{f^{-1}} & \text{ by associativity}, \\ 
	=& \co{(\co{g_2}{f})}{f^{-1}} & \text{ by assumption}, \\
	=& \co{g_2}{(\co{f}{f^{-1}})} & \text{ by associativity} \\
	=& \co{g_2}{\Id[a]} & \text{ since $f : a\cong b$} \\
	=& g_2.
\end{eqnarray*}
That $f$ is also an epimorphism is analoguous, indeed: Assume $g_1,g_2 : b\to c$ are morphisms such that $\co{f}{g_1} = \co{f}{g_2}$. We then have that $g_1 = g_2$ because 
\begin{eqnarray*}
g_1 = \co{\Id[b]}{g_1} =& \co{(\co{f^{-1}}{f})}{g_1} & \text{ since $f : a\cong b$},\\ 
	=& \co{f^{-1}}{(\co{f}{g_1})} & \text{ by associativity}, \\ 
	=& \co{f^{-1}}{(\co{f}{g_2})} & \text{ by assumption}, \\
	=& \co{(\co{f^{-1}}{f})}{g_2} & \text{ by associativity} \\
	=& \co{\Id[b]}{g_2} & \text{ since $f : a\cong b$} \\
	=& g_2.
\end{eqnarray*}
\end{itemize}
\end{solution}

\begin{solution}[\cref{exer:counterexample_monoepi_not_iso}]\label{sol:counterexample_monoepi_not_iso}
Let $(X,\leq_X)$ be a preordered set. Any morphism $f \in \POS(X,\leq_X)(x,y)$ is always both a monomorphism and an epimorphism because hom-sets have at most on element. But, by \cref{exer:iso_in_posetcategory}, we know that in a poset (not a preordered set!), the only isomorphisms are the identity morphisms. Hence, if $x\leq y$ but $x\not=y$ (living in a poset), then the corresponding morphism in $\Hom{x}{y}$ is both an epimorphism and monomorphisms but not an isomorphism.\\
A concrete example is given by e.g. the poset of truth values $\{0, 1\}$. We have $0\leq 1$ and those are not equal.
\end{solution}

%% Universal properties
\begin{solution}[\cref{exer:initial_set}] \label{sol:initial_set}
An initial object (and the only one), is the emptyset $\emptyset$, indeed: Let $X$ be a set. Then there is clearly a unique function $\emptyset\to X$.
\end{solution}

\begin{solution}[\cref{exer:initial_posetcat}]\label{sol:initial_posetcat}
A initial object in $\POS(X,\leq)$ is the minimal object, that is an element $\bot\in X$ such that
\begin{equation}
\forall y\in X: \bot \leq y.
\end{equation}
Indeed: Assume $x$ is an initial object in $(X,\leq)$, i.e. for any other element $y\in X$, there exists a (unique) morphism $x\to y$, i.e. hence, by definition of the hom-sets, we have $x\leq y$. So $x$ is indeed the minimal object.

Conversely, assume $\bot$ is a minimal element, hence, for each $y\in X$, we have $\bot\leq y$. Hence $\Hom{\bot}{y}$ is non-empty. So it must contain exactly one element. This means precisely that it is initial.


A somewhat \textit{more compact} solution is as follows: By definition of $\POS(X,\leq)$, for each $x\in X$, we have:
\[
\forall y\in X: \left(x\leq y \iff \exists! f\in \Hom{x}{y}\right).
\]
Hence an object $x$ is initial if and only if, $x\leq y$ for all $y\in X$, if and only if it is minimal.
\end{solution}

\begin{solution}[\cref{exer:initial-unique}]\label{sol:initial-unique}
Let $A$ and $B$ be initial objects in $\CC$. By initiality of $A$ (resp. $B$), there exists a unique morphism $f \in \CHom{\CC}{A}{B}$ (resp. $g \in \CHom{\CC}{B}{A}$). That $f$ and $g$ are inverses follows because $\co{f}{g} \in \CHom{\CC}{A}{A}$ (resp. $\co{g}{f}\in \CHom{\CC}{B}{B}$). But by initiality of $A$ (resp. $B$), $\CHom{\CC}{A}{A}$ (resp. $\CHom{\CC}{B}{B}$) has a unique element, but both $\co{f}{g}, \Id[A] \in \CHom{\CC}{A}{A}$ (resp. $\co{g}{f}, \Id[B] \in \CHom{\CC}{B}{B}$), hence they must be equal.
\end{solution}

\begin{solution}[\cref{exer:initiality_preserved_by_iso}]\label{sol:initiality_preserved_by_iso}
Assume $A\in \Ob{\CC}$ is initial, $B\in\Ob{\CC}$ an arbitrary object and $i:A\cong B$ an isomorphism. We have to show that $B$ is initial, i.e. for each $X\in\Ob{\CC}$, there should exists a unique morphism $B\to X$.

Fix such an $X$. By initiality of $A$, there exists a (unique) morphism $f\in \CHom{\CC}{A}{X}$. If we denote the inverse of $i$ by $j$, we have $\co{j}{f} \in\CHom{\CC}{B}{X}$. To show that $\co{j}{f}$ is the unique morphism in this hom-set, let $g\in \CHom{\CC}{B}{X}$. So we have $\co{i}{g} \in \CHom{\CC}{A}{X}$. By initiality of $A$, we have $\co{i}{g} = f$. The claim now follows by the following computation:
\[
\co{j}{f} = \co{j}{(\co{i}{g})} = \co{(\co{j}{i})}{g} = \co{\Id[B]}{g} = g.
\]
\end{solution}

\begin{solution}[\cref{exer:cat-without-initial}]\label{sol:cat-without-initial}
We give three solutions to this exercise.
\begin{itemize}
\item Consider the category generated by the graph: 
\[
\begin{tikzcd}
x & y
\end{tikzcd}
\]
This category can not have an initial object since there is no morphism from $x$ to $y$ or vice versa.
\item Consider the category generated by the graph: 
\[
\begin{tikzcd}
x \arrow[r, bend left, "f"] \arrow[r, bend right, "g"] & y
\end{tikzcd}
\]
This category also can not have an initial object, indeed: There is no morphism from $y$ to $x$, hence $y$ can not be initial. But also $x$ can not be initial since $f$ and $g$ are different morphisms.
\item Consider the category $ \POS(\mathbb Z, \leq) $, i.e., the category
\[
\begin{tikzcd}
	\dots \arrow[r] & -2 \arrow[r] & -1 \arrow[r] & 0 \arrow[r] & 1 \arrow[r] & 2 \arrow[r] & \dots
\end{tikzcd}
\]
This category can not have an initial object: Suppose it has an initial object $ x \in \mathbb Z $. Then we have another object $ x - 1 \in \mathbb Z $. Since $ x $ is initial, we have a morphism $ x \to x - 1 $, which means that $ x \leq x - 1 $, which is absurd. Therefore, this category does not have an initial object.
\end{itemize}
\end{solution}



%% Solutions to monads

\begin{solution}[\cref{exer:kleisli_triple_list}]
  \label{sol:kleisli_triple_list}
  For any set $X$, we write
  \[ (+) : \List(X) \times \List(X) \to \List(X)\]
  for list concatenation.

  For each set $X\in\Ob \SET$, we define:
  \[
    \eta_X : X \to \List(X) : x\mapsto [x] := \cons(x,\nil).
  \]
  For each function $f\in\CHom{\Ob \SET}{X}{\List(Y)}$, we define, by list recursion, the following function:
  \begin{align}
    f^{*} : \List(X) &\to \List(Y) 
    \\
    \nil & \mapsto \nil  \label{eq:list-bind-nil}
    \\
    \cons(x,xs) &\mapsto fx + f^*xs  \label{eq:list-bind-cons}
  \end{align}
  
We now show that the properties of a Kleisli triple hold:
\begin{enumerate}
\item For each set $X$, we have to show $\eta_X^{*} = \Id[T(X)]$,
  that is, for a list $\ell \in \List (X)$, we show $\eta_X^{*}(\ell) = \ell$.
  We prove this by structural induction on the list $\ell$.
  
  In case $\ell = \nil$, we have, by \cref{eq:list-bind-nil}, that $\eta_X^{*}(\nil) = \nil$.
  
  In case $\ell = \cons(x,xs)$, we compute
  \begin{align*}
    \eta_X^{*}(\cons(x,xs)) &= \eta_X(x) + \eta_X^{*}(xs) & \text{ by definition of } (-)^{*},
    \\
                            &= \eta_X(x) + \Id[\List{X}](xs)  & \text{ by induction hypothesis}
    \\
                            &= [x] + \Id[\List{X}](xs) & \text{ by definition of } \eta_X
    \\
                            &= [x] + xs
    \\
                            &= \cons(x,xs).
  \end{align*}
  
  

\item For each function $f:X\to Y$, we have to show $f^{*}(\eta_X(x)) = f(x)$, this indeed holds by the following computation:
\[
f^{*}(\eta_X(x)) = f^{*}(\cons(x,\nil)) = \cons(fx, f^{*}(\nil)) = \cons(fx, \nil),
\]
where the first equality holds by definition of $\eta_X$ and the second equality holds by definition of $f^{*}$.
\item Let $f:X\to \List Y$ and $g:Y\to \List Z$ be functions, we have to show 
\[
g^{*}(f^{*}(\ell)) = (\co{f}{g^{*}})^{*}(\ell),
\] 
for any $\ell \in \List X$.
 We prove this by structural induction on the list $\ell$.

\begin{itemize}
\item In case $\ell = \nil$, the equality holds trivially by \cref{eq:list-bind-nil}.

\item In case $\ell := \cons(x,s)$. By definition of $(f)^{*}$, the left hand side of is:
\[
g^{*}(f^{*}(\cons(x,s))) = g^{*}(f(x) + f^{*}(xs)),
\]
and the right hand side is:
\[
(\co{f}{g^{*}})^{*}(\cons(x,s)) = g^{*}(f(x)) + (\co{f}{g^{*}})^{*}(xs) = g^{*}(f(x)) + g^{*}(f^{*}(xs)),
\]
where the first equality holds by definition of $(\co{f}{g^{*}})^{*}$ and the second holds by the induction hypothesis. Hence it remains to show the following equality:
\begin{align}\label{eqn:bind_distributes}
g^{*}(f(x) + f^{*}(xs)) = g^{*}(f(x)) + g^{*}(f^{*}(xs)).
\end{align}

We do a pattern matching on $f(x)$ to show \cref{eqn:bind_distributes}:
\begin{itemize}
\item In case $f(x) = \nil$, we have
\[
g^{*}(\nil + f^{*}(xs)) = g^{*}(f^{*}(xs)) = \nil + g^{*}(f^{*}(xs)) = g^{*}(\nil) + g^{*}(f^{*}(xs)),
\]
where the thirth equality holds by \cref{eq:list-bind-nil}.
\item In case $f(x) = \cons(y,u)$, with $y\in Y$ and $u\in \List Y$, we have:
\begin{eqnarray*}
g^{*}(\cons(f(x),f^{*}(s)) =& g^{*}(\cons(\cons(y,u), f^{*}(xs))), \\
	=& g^{*}(\cons(y, u + f^{*}(xs))),\\
	=& g(y) + g^{*}(u + f^{*}(xs)),\\
	=& g(y) + g^{*}(u) + g^{*}(f^{*}(xs)),\\
	=& g^{*}(\cons(y,u)) + g^{*}(f^{*}(xs)).
\end{eqnarray*}
where the second equality holds by definition of $\cons$, the thirth and fifth by definition of $g^{*}$ and the fourth by the induction hypothesis.

\end{itemize}
\end{itemize}
\end{enumerate}
\end{solution}

\begin{solution}[\cref{exer:kleisli_triple_bintree}]
\label{sol:kleisli_triple_bintree}
For each set $X\in\Ob \SET$, we define:
\[
\eta_X : X \to \BinTree(X) : x\mapsto \Leaf x.
\]
For each function $f\in\CHom{\Ob \SET}{X}{\BinTree(Y)}$, we define:
\begin{align*}
f^{*} : \BinTree(X) \to \BinTree(Y) : t \mapsto 
\begin{cases}
f(a) &\quad \text{ if } t=\Leaf a,\\
\Branch{f^{*}(t_1)}{f^{*}(t_2)} &\quad \text{ if } t=\Branch{t_1}{t_2}.
\end{cases}
\end{align*}

We now show that the properties of a Kleisli triple hold:
\begin{enumerate}
\item For each set $X$, we have to show $\eta_X^{*} = \Id[\BinTree(X)]$. We show this by pattern matching on $t$:
\begin{itemize}
\item If $t=\Leaf a$, then
\[
\eta_X^{*}(t) = \eta_X^{*}(\Leaf{a}) = \eta_X(a) = \Leaf{a} = t.
\]
\item If $t=\Branch{t_1}{t_2}$, then
\[
\eta_X^{*}(t) = \eta_X^{*}(\Branch{t_1}{t_2}) = \Branch{\eta_X^{*}(t_1)}{\eta_X^{*}(t_2)} = \Branch{t_1}{t_2} = t.
\]
\end{itemize}

\item For each function $f:X\to Y$, we have to show $f^{*}(\eta_X(a)) = f(a)$, this indeed holds by the following computation:
\[
f^{*}(\eta_X(a)) = f^{*}(\Leaf{a}) = f(a).
\]

\item Let $f:X\to \BinTree Y$ and $g:Y\to \BinTree Z$ be functions, we have to show 
\[
g^{*}(f^{*}(t)) = (\co{f}{g^{*}})^{*}(t).
\] 
That this equality holds follows by pattern matching:
\begin{itemize}
\item If $t= \Leaf{a}$, then
\[
g^{*}(f^{*}(t)) = g^{*}(f^{*}(\Leaf{a}) = g^{*}(f(a)) = (\co{f}{g^{*}})(a) = (\co{f}{g^{*}})^{*}(\Leaf{a}) = (\co{f}{g^{*}})^{*}(t).
\]
\item If $t=\Branch{t_1}{t_2}$, then is the left-hand-side given by
\[
g^{*}(f^{*}(t)) = g^{*}(f^{*}(\Branch{t_1}{t_2})) = g^{*}\left(\Branch{f^{*}(t_1)}{f^{*}(t_2)}\right) = \Branch{g^{*}(f^{*}(t_1))}{g^{*}(f^{*}(t_2))}.
\]
The right-hand-side is given by 
\[
(\co{f}{g^{*}})^{*}(t) = (\co{f}{g^{*}})^{*}(\Branch{t_1}{t_2}) = \Branch{(\co{f}{g^{*}})(t_1)}{(\co{f}{g^{*}})(t_2)}.
\]
Hence, by the induction hypothesis, the both sides are equal.
\end{itemize}

\end{enumerate}
\end{solution}

\begin{solution}[\cref{exer:kleisli_triple_maybe}]
\label{sol:kleisli_triple_maybe}
Before we continue with this exercise, we first fix some notation. Since $X+E$ is the disjoint union of $X$ and $E$, we have the canonical inclusions which we denote by
\[ i^X_l : X\to X + E, \quad i^X_r : E\to X+E. \] 
Hence, a function whose domain is $X+E$ is completely determined by specifiying where each $i^X_l(x)$ and each $i^X_r(e)$ are mapped to. \textit{Notice that this is precisely the notation and the universal property of the coproduct (in $\SET$)}.

For each set $X\in\Ob \SET$, we define:
\[
\eta_X : X \to X+E : x\mapsto i^X_l(x).
\]
For each function $f\in\CHom{\Ob \SET}{X}{Y+E}$, we define:
\begin{align*}
f^{*} :X+E \to Y+E : z \mapsto 
\begin{cases}
f(x) &\quad \text{ if } z=i^X_l(x),\\
i^Y_r(e) &\quad \text{ if } z=i^X_r(e).
\end{cases}
\end{align*}


We now show that the properties of a Kleisli triple hold:
\begin{enumerate}
\item For each set $X$, we have to show $\eta_X^{*} = \Id[X+E]$: 
\begin{itemize}
\item If $z=i^X_l(x)$, then 
\[
\eta_X^{*}(z) = \eta_X^{*}(i^X_l(x)) = \eta_X(x) = i^X_l(x) = z = \Id[X+E](z).
\]
\item If $z=i^X_r(e)$, then
\[
\eta_X^{*}(e) = \eta_X^{*}(i^X_r(e)) = i^X_r(e) = z = \Id[X+E](z).
\]
\end{itemize}

\item For each function $f:X\to Y$, we have to show $f^{*}(\eta_X(x)) = f(x)$ but this holds directly by the definition of $(-)^{*}$ since $\eta_X(x)=i_l^X(x)$.

\item Let $f:X\to Y + E$ and $g:Y\to Z + E$ be functions, we have to show 
\[
g^{*}(f^{*}(z)) = (\co{f}{g^{*}})^{*}(z).
\] 
To show this, we do pattern matching on $z\in X+E$:
\begin{itemize}
\item If $z=i^X_l(x)$, then
\[
g^{*}(f^{*}(z)) = g^{*}(f^{*}(i_l^X(x))) = g^{*}(f(x)) = (\co{f}{g^{*}})^{*}(i_l^X(x)) = (\co{f}{g^{*}})^{*}(z).
\]
\item If $z=i^X_r(e)$, then
\[
g^{*}(f^{*}(z)) = g^{*}(f^{*}(i_l^X(e))) = g^{*}(i_l^Y(e)) = i_l^Z(e) = (\co{f}{g^{*}})^{*}(i_l^X(e)) = (\co{f}{g^{*}})^{*}(z).
\]
\end{itemize}

\end{enumerate}
\end{solution}

\begin{solution}[\cref{exer:kleisli_triple_nondeterminism}]
  \label{sol:kleisli_triple_nondeterminism}
For each set $X\in\Ob \SET$, we define:
\[
\eta_X : X \to \mathbb{P}_{fin}(X) : x\mapsto \{x\}.
\]
For each function $f\in\CHom{\Ob \SET}{X}{\mathbb{P}_{fin}(Y)}$, we define:
\begin{align*}
f^{*} : \mathbb{P}_{fin}(X) \to \mathbb{P}_{fin}(Y) : A \mapsto \bigcup_{a\in A} f(a).
\end{align*}
First notice that $\eta_X$ and $f^{*}$ are well-defined, indeed: 
\begin{itemize}
\item $\eta_X(x) = \{x\}$ is clearly finite since it only contains one element.
\item Let $A\in \mathbb{P}_{fin}(X)$. By definition of $f$, for each $a\in A$, $f(a)$ is finite. But there are only a finite number of elements in $A$, so $\bigcup_{a\in A} f(a)$ is a finite union of finite sets, hence, it is again finite.
\end{itemize}
We now show that the properties of a Kleisli triple hold:
\begin{enumerate}
\item For each set $X$, we have to show $\eta_X^{*} = \Id[\mathbb{P}_{fin}(X)]$. Let $A\in \mathbb{P}_{fin}(X)$, the claim then follows by the following computation:
\[
\eta_X^{*}(A) = \bigcup_{a\in A} \eta_X(a) = \bigcup_{a\in A} \{a\} = A = \Id[\mathbb{P}_{fin}(X)](A).
\]

\item For each function $f:X\to Y$, we have to show $f^{*}(\eta_X(x)) = f(x)$ but this holds directly by the definition of $(-)^{*}$ since
\[
f^{*}(\eta_X(x)) = f^{*}(\{x\}) = \bigcup_{a\in \{x\}} f(a) = f(x).
\]

\item Let $f:X\to \mathbb{P}_{fin}(Y)$ and $g:Y\to \mathbb{P}_{fin}(Z)$ be functions, we have to show 
\[
g^{*}(f^{*}(A)) = (\co{f}{g^{*}})^{*}(A).
\] 
Let $A\in \mathbb{P}_{fin}(X)$, the left-hand-side is given as:
\[
g^{*}(f^{*}(A)) = g^{*}\left( \bigcup_{a\in A} f(a) \right) = \bigcup_{b \in \bigcup_{a\in A} f(a)} g(f(a)) = \bigcup_{a\in A} \bigcup_{b\in f(a)} g(f(a)).
\]
The right-hand-side is given as:
\[
(\co{f}{g^{*}})^{*}(A) = \bigcup_{a\in A} (\co{f}{g^{*}})(a) = \bigcup_{a\in A} g^{*}(f(a)) = \bigcup_{a\in A} \bigcup_{b\in f(a)} g(f(a))
\]
Hence, both sides are equal.

\end{enumerate}
\end{solution}

\begin{solution}[\cref{exer:kleisli_triple_continuation}]
\label{sol:kleisli_triple_continuation}
For each set $X\in\Ob \SET$, we define:
\[
\eta_X : X \to (X\to R)\to R : x\mapsto (\lambda f. f(x)).
\]
For each function $f\in\CHom{\Ob \SET}{X}{Cont^R(Y)}$, we define:
\begin{align*}
f^{*} : Cont^R(X) \to Cont^R(Y) : i \mapsto \lambda (j:Y\to R), i(f(-)(j)).
\end{align*}
Notice that this is indeed well-defined: Let $i\in Cont^R(X)$, i.e. $i:(X\to R)\to R$. Then $f^{*}(i) : (Y\to R)\to R$. Let $j:Y\to R$. Then $f(-)(j) : X\to R$, hence we can apply it to $i$ and we have $i\left(f(-)(j)\right)\in R$.

Let $i\in Cont^R(X)$. We now show that this data satisfies the properties of a Kleisli triple:
\begin{enumerate}
\item For each set $X$, we have to show $\eta_X^{*} = \Id[Cont^R(X)]$. Let $x\in X$. The claim then follows by the following computation:
\[
\eta_X^{*}(i) = \lambda j, i\left(\eta_X(-)(j)\right) = \lambda j, i\left(\lambda x, j(x)\right) = i
\]

\item For each function $f:X\to Y$, we have to show $f^{*}(\eta_X(x)) = f(x)$, this follows by the following computation:
\[
f^{*}(\eta_X(x)) = f^{*}(\lambda g,g(x)) = \lambda j, \left(\left(\lambda g,g(x)\right)(f(-)(j))\right) = \lambda j, (f(x)(j)) = f(x).
\]

\item Let $f:X\to Cont^R(Y)$ and $g:Y\to Cont^R(Z)$ be functions, we have to show 
\[
g^{*}(f^{*}(i)) = (\co{f}{g^{*}})^{*}(i).
\] 
The left-hand-side is given as:
\[
g^{*}(f^{*}(i)) = g^{*}\left(\lambda j, i\left(f(-)(j)\right)\right) = \lambda \tilde{j}, \left(\lambda j, i\left(f(-)(j)\right)\right)\left(g(-)(\tilde{j})\right) = \lambda \tilde{j}, i\left(f(-)\left(g(-)(\tilde{j})\right)\right).
\]
The right-hand-side is given as:
\[
(\co{f}{g^{*}})^{*}(i) = \lambda j, i\left((\co{f}{g^{*}})(-)(j)\right)
\]
So to show that both sides are equal, it sufficies to show that for each $j$, we have 
\[
f(-)\left(g(-)(j)\right) = (\co{f}{g^{*}})(-)(j).
\]
Notice that these are functions $X\to R$. Hence we will show this pointwise for each $x\in X$. The left-hand-side is given by: 
\[
f(-)\left(g(-)(j)\right)(x) = f(x)\left(g(-)(j)\right) 
\]
The right-hand-side is given by:
\begin{eqnarray*}
(\co{f}{g^{*}})(-)(j)(x) &=& (\co{f}{g^{*}})(x)(j)\\ 
	&=& \left( (\co{f}{g^{*}})(x) \right)(j)\\ 
	&=& \left(g^{*}(f(x))\right)(j)\\ 
	&=& \left( \lambda k, f(x)\left(g(-)(k)\right) \right)(j)\\ 
	&=& f(x)\left(g(-)(j)\right).
\end{eqnarray*}
Hence, both sides are equal.

\end{enumerate}
\end{solution}

\begin{solution}[\cref{exer:kleisli_triple_familiesofelements}]\label{sol:kleisli_triple_familiesofelements}
For each set $X\in\Ob \SET$, we define:
\[
\eta_X : X \to (R \to X) : x\mapsto (\lambda \_, x).
\]
For each function $f\in\CHom{\Ob \SET}{X}{R\to Y}$, we define:
\begin{align*}
f^{*} : (R\to X) \to (R\to Y) : g \mapsto \lambda r, f(g(r))(r).
\end{align*}
Notice that this is indeed well-typed: Let $g : R\to X$ and $r\in R$. Then $g(r)\in X$, therefore, $f(g(r)) : R\to Y$ and consequently $f(g(r))(r)\in Y$.

We now show that this data satisfies the properties of a Kleisli triple:
\begin{enumerate}
\item For each set $X$, we have to show $\eta_X^{*} = \Id[R\to X]$. Let $r\in R$ and $g\in R\to X$. The claim then follows by the following computation (using functional extensionality):
\[
\eta_X^{*}(g)(r) = \eta_X(g(r))(r) = (\lambda \_, g(r))(r) = g(r).
\]
\item For each $x\in X$ and $r\in R$, we have to show $\co{\eta_X}{f^{*}} = f$. The claim then follows by the following computation (using functional extensionality):
\[
f^{*}(\eta_X(x))(r) = f^{*}(\lambda \_,x)(r) = \left(\lambda r', f((\lambda \_, x)(r'))(r')\right)(r) = f((\lambda \_,x)(r))(r) = f(x)(r).
\]
\item Let $f: X\to (R\to Y)$ and $g: Y\to (R\to Z)$. We have to show, by function extensionality, that for any $\phi\in R\to X$, we have 
\[
(\co{f}{g^{*}})^{*}(\phi) = g^{*}(f^{*}(\phi)).
\]
This indeed follows, yet again by functional extensionality. Let $r\in R$. We calculate both the left and right-hand side:
\begin{align*}
LHS =& (\co{f}{g^{*}})^{*}(\phi)(r)\\ 
	=& \co{g^{*}}{f}(\phi(r))(r)\\ 
	=& g^{*}\left(f(\phi(r))\right)(r)\\ 
	=& g\left(f(\phi(r))(r)\right)(r).
\end{align*}
\begin{align*}
RHS =& g^{*}(f^{*}(\phi))(r)\\ 
	=& g^{*}\left(\lambda s, f(\phi(s))(s)\right)(r)\\
	=& g( f(\phi(r))(r) )(r).
\end{align*}
Thus, the left and right hand sides compute to the same term, hence they are equal.
\end{enumerate}
\end{solution}


\begin{solution}[\cref{exer:initial_pointset}]\label{sol:initial_pointset}
	An initial object is a one-element set $ (\{ \star \}, \star) $. Let $ (X, x) $ be a pointed set. Then we have a unique function $ \star \to X $ that sends $ \star $, the chosen (and only) point of $ \{ \star \} $, to $ x $, the chosen point of $ X $, namely $ f: \star \mapsto x $.
\end{solution}

\begin{solution}[\cref{exer:terminal_set}]\label{sol:terminal_set}
	A terminal set in the category of sets is a one-element set $ \{ \star \} $. Given any set $ X $, we have a unique function $ X \to \star $, since any element of $ X $ must be sent to $ \star $.
\end{solution}

\begin{solution}[\cref{exer:terminal_posetcat}]\label{sol:terminal_posetcat}
	Given a poset $ (X, \leq) $, a terminal object in the category $ \POS(X, \leq) $ is exactly a maximal element in $ X $. Indeed, given such a maximal element $ x \in X = \POS(X, \leq)_0 $, we have for all $ y \in \POS(X, \leq)_0 $, since $ x $ is maximal, that $ y \leq x $. Therefore, we have a morphism $ f: x \to y $. By the definition of the hom-sets in $ \POS(X, \leq) $, $ f $ is unique and we conclude that $ x $ is a terminal object.
	Conversely, unfolding the definition of terminal object shows that a terminal object yields a maximal element.
\end{solution}

\begin{solution}[\cref{exer:terminal-unique}]\label{sol:terminal-unique}
	Suppose that we have a category $ \CC $ and two terminal objects $ B, B^\prime \in \Ob\CC $. Since $ B^\prime $ is terminal, we have a morphism $ f: B \to B^\prime $ and since $ B $ is terminal, we have a morphism $ g: B^\prime \to B $. Note that we have two morphisms from $ B $ to $ B $, namely $ g \circ f $ and $ \Id[B] $. Also, because $ B $ is terminal, there exists a unique morphism $ B \to B $. Therefore, $ g \circ f = \Id[B] $. In the same way, we have $ f \circ g = \Id[B^\prime] $. Therefore, $ f $ is the isomorphism (with inverse $g$) between $ B $ and $ B^\prime $ that we are looking for.
\end{solution}

\begin{solution}[\cref{exer:terminality_preserved_by_iso}]\label{sol:terminality_preserved_by_iso}
	Let $ \CC $ be a category and take $ B, B^\prime \in \Ob\CC $ objects in $ \CC $. Suppose that we have an isomorphism $ i: B \cong B^\prime $ and that $ B $ is a terminal object in $ \CC $. We have to show that $ B^\prime $ is terminal. In other words, for all $ A \in \Ob\CC $, we have to show that there exists a unique morphism $ f: A \to B^\prime $.

	Now, given such an object $ A \in \Ob\CC $, we have a morphism $ f: A \to B $ by terminality of $ B $. Therefore, we have a morphism $ g = i \circ f: A \to B^\prime $. This proves existence. For uniqueness, suppose that we also have another morphism $ h: A \to B^\prime $. Then we have morphisms $ \Inv{i} \circ g $ and $ \Inv{i} \circ h $ from $ A $ to $ B $. Since $ B $ is terminal, there exists only one morphism from $ A $ to $ B $, so $ \Inv{i} \circ g = \Inv{i} \circ h $. Therefore, we have 
	\[ g = i \circ (\Inv{i} \circ g) = i \circ (\Inv i \circ h) = h \]
	and this concludes the proof.
\end{solution}

\begin{solution}[\cref{exer:terminal_iff_initial_op}]\label{sol:terminal_iff_initial_op}
	Let $ \CC $ be a category. Suppose that $ \CC $ has a terminal object $ B \in \Ob\CC $. Note that $ \Ob\CC = \Ob{\op\CC} $. We will show that $ B $ is an initial object in $ \op\CC $. That is, for all $ A \in \Ob{\op\CC} $, we will show that $ \op\CC $ has a unique morphism from $ B $ to $ A $.
	Let $ A \in \Ob{\op\CC} $ be an arbitrary object. Since $ B $ is terminal in $ \CC $, we have that $ \CC(A, B) $ contains exactly one element. Then $ \op\CC(B, A) $ contains exactly one element as well, because $ \CC(A, B) = \op\CC(B, A) $. Therefore, $ B $ is an initial object in $ \op\CC $.

	Conversely, suppose that $ \op\CC $ has an initial object $ B \in \Ob{\op\CC} = \Ob\CC $. Given any object $ A \in \Ob\CC = \Ob{\op\CC}  $, since $ B $ is initial in $ \op\CC $, $ \op\CC(B, A) $ contains exactly one element $ f $. Then $ \CC(A, B) $ contains exactly one element (this is $ f $ again) as well. Therefore, $ B $ is a terminal object in $ \CC $.
\end{solution}

\begin{solution}[\cref{exer:cat-without-terminal}]\label{sol:cat-without-terminal}
We give three solutions to this exercise.
\begin{itemize}
\item Consider the category generated by the graph: 
\[
\begin{tikzcd}
x & y
\end{tikzcd}
\]
This category can not have a terminal object since there is no morphism from $x$ to $y$ or vice versa.
\item Consider the category generated by the graph: 
\[
\begin{tikzcd}
x \arrow[r, bend left, "f"] \arrow[r, bend right, "g"] & y
\end{tikzcd}
\]
This category also can not have a terminal object, indeed: There is no morphism from $y$ to $x$, hence $x$ can not be terminal. But also $y$ can not be terminal since $f$ and $g$ are different morphisms.
\item Consider the category $ \POS(\NN, \leq) $, i.e., the category
\[
\begin{tikzcd}
	0 \arrow[r] & 1 \arrow[r] & 2 \arrow[r] & \dots
\end{tikzcd}
\]
This category can not have a terminal object: Suppose it has a terminal object $ n \in \NN $. Then we have another object $ n + 1 \in \NN $. Since $ n $ is terminal, we have a morphism $ n + 1 \to n $, which means that $ n + 1 \leq n $, which is absurd. Therefore, this category does not have a terminal object.
\end{itemize}
\end{solution}

\begin{solution}[\cref{exer:product_set}]\label{sol:product_set}
	Given $ A, B \in \Ob \SET $, we claim that the cartesian product $ A \times B $ with the left projection $ \projl: (a, b) \mapsto a $ and right projection $ \projr: (a, b) \mapsto b $ is a product of $ A $ and $ B $.

	Indeed, given an object $ Q \in \Ob \SET $ with morphisms $ l: Q \to A $ and $ r: Q \to B $, we have a morphism $ f := \langle l, r \rangle : Q \to A \times B $, given by $ q \mapsto (l(q), r(q)) $. For all $ q \in Q $, we have $ \projl \circ f(q) = \projl(l(q), r(q)) = l(q) $ and $ \projr \circ f(q) = \projr(l(q), r(q)) = r(q) $, so the diagram commutes, which proves existence.

	Now, for uniqueness, suppose that we also have another morphism $ g: Q \to A \times B $ that makes the diagram commute. Note that we can write all elements $ p \in A \times B $ as $ p = (\projl(p), \projr(p)) $. Then we have, for all $ q \in Q $,
	\[ g(q) = (\projl(g(q)), \projr(g(q))) = (\projl \circ g(q), \projr \circ g(q)) = (l(q), r(q)) = f(q), \]
	which completes the proof.
\end{solution}

\begin{solution}[\cref{exer:product_posetcat}]\label{sol:product_posetcat}
	For a poset $ (X, \leq) $, note that morphisms between objects always are unique if they exist, so uniqueness conditions on morphisms (and whether diagrams commute or not) are not relevant here.
	Furthermore, any diagram commutes automatically.
	
	For objects $ A, B \in \Ob{\POS(X, \leq)} $, a product of $ A $ and $ B $ is an object $ C \in \Ob{\POS(X, \leq)} $ with morphisms $ C \to A $ and $ C \to B $ such that for any object $ D \in \Ob{\POS(X, \leq)} $ with morphisms $ D \to A $ and $ D \to B $, we have a morphism $ D \to C $.

	This means that we need an object $ C $ such that $ C \leq A $ and $ C \leq B $, and for all objects $ D $ such that $ D \leq A $ and $ D \leq B $, we also have $ D \leq C $. Therefore, a product of $ A $ and $ B $ is the (unique up to isomorphism) greatest element that is less than or equal to $ A $ and $ B $, if it exists.

	\begin{rem}
		The uniqueness up to isomorphism is necessary. For example, consider the poset-category generated by the following diagram:
		\begin{center}
			\begin{tikzcd}
				A & B\\
				X \arrow[u] \arrow[ru] & Y \arrow[u] \arrow[lu]
			\end{tikzcd}
		\end{center}
		For the product of $ A $ and $ B $, the candidates are $ X $ and $ Y $, since we have both $ X \leq A $ and $ X \leq B $, and $ Y \leq A $ and $ Y \leq B $. However, $ X $ cannot be the product, since if we are given $ D = Y $, we need $ Y \leq X $, which is not true. In the same way, $ Y $ cannot be the product, because $ X \leq Y $ does not hold.
	\end{rem}
\end{solution}

\begin{solution}[\cref{exer:product-unique}]\label{sol:product-unique}
	In a category $ \CC $, given two objects $ A, B \in \Ob \CC $, suppose that we have two products $ C, C^\prime \in \Ob \CC $, with projections $ \projl: C \to A $, $ \projr: C \to B $, $ \pi^\prime_l: C^\prime \to A $ and $ \pi^\prime_r: C^\prime \to B $.

	Since $ C^\prime $ is a product, and we have the morphisms $ \projl $ and $ \projr $, the universal property gives a morphism $ f: C \to C^\prime $ such that $ \projl = \pi^\prime_l \circ f $ and $ \projr = \pi^\prime_r \circ f $. In the same way, we have a morphism $ g: C^\prime \to C $ such that $ \pi^\prime_l = \projl \circ g $ and $ \pi^\prime_r = \projr \circ g $.
	
	Since $ C $ is a product, the universal property gives that there is exactly one morphism $ h: C \to C $ such that $ \projl \circ h = \projl $ and $ \projr \circ h = \projr $. The morphism $ h = \Id[C] $ satisfies this property. However, we also have the morphism $ g \circ f: C \to C $, such that $ \projl \circ g \circ f = \pi^\prime_l \circ f = \projl $ and $ \projr \circ g \circ f = \pi^\prime_r \circ f = \projr $. Therefore, $ g \circ f = h = \Id[C] $. In the same way, $ f \circ g = \Id[C^\prime] $, so $ f: C \cong C^\prime $ is an isomorphism, with inverse $ g $.
\end{solution}

\begin{solution}[\cref{exer:product_preserved_by_iso}]\label{sol:product_preserved_by_iso}
	Let $ \CC $ be a category and take objects $ A, B \in \Ob\CC $. Let $ (P, \projl: P \to A, \projr: P \to B) $ be a product of $ A $ and $ B $ in $ \CC $. Let $ P^\prime \in \Ob\CC $ be another object, and suppose that we have an isomorphism $ f: P \cong P^\prime $.

	We claim that $ (P^\prime, \projl^\prime, \projr^\prime) $, with $ \projl^\prime = \projl \circ \Inv{f} $ and $ \projr^\prime = \projr \circ \Inv{f} $ is also a product of $ A $ and $ B $. Now, given any object $ Q \in \Ob\CC $ with morphisms $ l: Q \to A $ and $ r: Q \to B $, we have to show that there exists a unique morphism $ g: Q \to P^\prime $ such that $ \projl^\prime \circ g = l $ and $ \projr^\prime \circ g = r $. See also the following diagram:

	\begin{center}
		\begin{tikzcd}
		& Q \arrow[ld, "l"'] \arrow[rd, "r"] \arrow[d, "h"]               &   \\
		A & P \arrow[l, "\projl"] \arrow[r, "\projr"'] \arrow[d, "f"]         & B \\
		& P^\prime \arrow[lu, "\projl^\prime"] \arrow[ru, "\projr^\prime"'] &  
		\end{tikzcd}
	\end{center}
	
	By the universal property of the product, we have a morphism $ h: Q \to P $ such that $ \projl \circ h = l $ and $ \projr \circ h = r $. We take $ g = f \circ h $. We have 
	\[ \projl^\prime \circ g = (\projl \circ \Inv{f}) \circ (f \circ h) = \projl \circ h = l  \]
	and
	\[ \projr^\prime \circ g = (\projr \circ \Inv{f}) \circ (f \circ h) = \projr \circ h = r.  \]
	This proves existence.

	For uniqueness, suppose that we have two morphisms, $ g, g^\prime: Q \to P^\prime $ such that $ \projl^\prime \circ g = l = \projl^\prime \circ g^\prime $ and $ \projr^\prime \circ g = r = \projr^\prime \circ g^\prime $. By the universal property of the product, there exists exactly one morphism $ h: Q \to P $ such that $ \projl \circ h = l $ and $ \projr \circ h = r $. Since
	\[ \projl \circ (\Inv{f} \circ g) = (\projl \circ \Inv{f}) \circ g = \projl^\prime \circ g = l \]
	and
	\[ \projr \circ (\Inv{f} \circ g) = (\projr \circ \Inv{f}) \circ g = \projr^\prime \circ g = r, \]
	we have $ h = \Inv{f} \circ g $. In the same way, we have $ h = \Inv f \circ g^\prime $. Therefore,
	\[ g = f \circ \Inv f \circ g = f \circ h = f \circ \Inv f \circ g^\prime = g^\prime, \]
	which concludes the proof.
\end{solution}

\begin{solution}[\cref{exer:product_with_terminal}]\label{sol:product_with_terminal}
	Let $ \CC $ be a category, let $ A \in \Ob\CC $ be an object and let $ T \in \CC $ be the terminal object.

	We claim that $ (A, \projl, \projr) $ (with $ \projl = \Id[A] $ and $ \projr $ the unique morphism $ A \to T $) is a product of $ A $ and $ T $.

	We have to prove that for all $ B \in \Ob\CC $ with morphisms $ l: B \to A $ and $ r: B \to T $, there exists a unique morphism $ f: B \to A $ such that $ \projl \circ f = l $ and $ \projr \circ f = r $. To that end, let $ B \in \Ob\CC $ be such an object with morphisms $ l $ and $ r $.
	
	To prove existence, we take $ f = l $. Then we have $ \projl \circ f = \Id[A] \circ l = l $. Since $ T $ is a terminal object, the morphism $ B \to T $ is unique, so $ l = \projr \circ f $.

	To prove uniqueness of $ f $, suppose that there exists also another morphism, $ f^\prime: B \to A $ such that $ \projl \circ f^\prime = l $. Then we have
	\[ f^\prime = \Id{A} \circ f^\prime = \projl \circ f^\prime = l = f, \]
	which concludes the proof.
\end{solution}

\begin{solution}[\cref{exer:product_iff_terminal_in_subcategory}]\label{sol:product_iff_terminal_in_subcategory}
	Let $ \CC $ be a category and $ A, B \in \Ob \CC $ objects. Let us call the category mentioned in the exercise $ \CC_{A \times B} $.

	Suppose that we have a terminal object $ (C, \projl, \projr) \in \Ob{\CC_{A \times B}} $. We claim that this is a product of $ A $ and $ B $ in $ \CC $. Indeed, given any object $ D \in \Ob \CC $ with morphisms $ l: D \to A $, $ r: D \to B $, we have an object $ (D, l, r) \in \Ob{\CC_{A \times B}} $. Since $ (C, \projl, \projr) $ is a terminal object, there exists a unique morphism $ f: (D, l, r) \to (C, \projl, \projr) $. By the definition of morphisms in $ \CC_{A \times B} $, $ f $ is the unique morphism $ f: D \to C $ such that $ \projl \circ f = l $ and $ \projr \circ f = r $.

	Conversely, suppose that we have a product $ C \in \Ob \CC $ of $ A $ and $ B $ with morphisms $ \projl: C \to A $ and $ \projr: C \to B $. This gives an object $ (C, \projl, \projr) \in \Ob{\CC_{A \times B}} $. We claim that this is a terminal object. Indeed, given any object $ (D, l, r) \in \Ob{\CC_{A \times B}} $, since $ C $ is a product in $ \CC $, we have a unique morphism $ f: D \to C $ such that $ \projl \circ f = l $ and $ \projr \circ f = r $. Therefore, $ f $ is a unique morphism in $ \CC_{A \times B}((D, l, r), (C, \projl, \projr)) $. Since this holds for any $ (D, l, r) \in \Ob{\CC_{A \times B}} $, $ (C, \projl, \projr) $ is a terminal object in $ \CC_{A \times B} $, which concludes the proof.
\end{solution}

\begin{solution}[\cref{exer:product_of_morphisms}]\label{sol:product_of_morphisms}
	Let $\CC$ be a category with a choice of product $(A\times B, \projl, \projr)$ for any two objects $A,B\in \Ob{\CC}$. Take objects $ A, B, C, D \in \Ob \CC $ and morphisms $ f: A \to C $ and $ g: B \to D $.

	\begin{center}
		\begin{tikzcd}
		A \arrow[d, "f"'] & A \times B \arrow[l, "\projl"'] \arrow[r, "\projr"] \arrow[ld, "f \circ \projl"'] \arrow[rd, "g \circ \projr"] \arrow[d, "h"] & B \arrow[d, "g"] \\
		C                 & C \times D \arrow[l, "\projl^\prime"] \arrow[r, "\projr^\prime"']                                                             & D               
		\end{tikzcd}
	\end{center}

	We have the products $ (A \times B, \projl, \projr) $ and $ (C \times D, \projl^\prime, \projr^\prime) $. We have morphisms $ f \circ \projl: A \times B \to C $ and $ g \circ \projr: A \times B \to D $. By the universal property of the product $ C \times D $, there exists a (unique) morphism $ h: A \times B \to C \times D $ that makes the diagram commute. This is the morphism we are looking for.
\end{solution}

\begin{solution}[\cref{exer:swap_binary_product}]\label{sol:swap_binary_product}
  Let $\CC$ be a category with a choice of product $(A\times B, \projl, \projr)$ for any two objects $A,B\in \Ob{\CC}$. Let $A, B \in \Ob\CC$ be objects.

	\begin{center}
		\begin{tikzcd}
		& A \times B \arrow[ld, "\projr"'] \arrow[rd, "\projl"] \arrow[dd, "f", bend left]               &   \\
		B &                                                                                               & A \\
		& B \times A \arrow[ru, "\projr^\prime"'] \arrow[lu, "\projl^\prime"] \arrow[uu, "g", bend left] &  
		\end{tikzcd}
	\end{center}

	We have the products $ (A \times B, \projl, \projr) $ and $ (B \times A, \projl^\prime, \projr^\prime) $. By the universal properties of the products $ A \times B $ and $ B \times A $, we get morphisms $ f: A \times B \to B \times A $ and $ g: B \times A \to A \times B $, which make the diagram commute.
	
	By the universal property of the product $ A \times B $, there exists a unique morphism $ h: A \times B \to A \times B $ such that $ \projl \circ h = \projl $ and $ \projr \circ h = \projr $. Since $ \Id[A \times B] $ satisfies this, we have $ h = A \times B $. We also have the morphism $ g \circ f: A \times B \to A \times B $. We have
	\[ \projr \circ g \circ f = \projl^\prime \circ f = \projr \]
	and in the same way, we have $ \projl \circ g \circ f = \projl $. Therefore, $ g \circ f = h = \Id[A \times B] $. In the same way, we have $ f \circ g = \Id[B \times A] $. Therefore, we conclude that $ f $ is the isomorphism we are looking for, with inverse $ g $.
\end{solution}

\begin{solution}[\cref{exer:in_catamorphism_id}]\label{sol:in_catamorphism_id}
	Let $ F: \CC \to \CC $ be an endofunctor and let $ (\Initalg F, \In) $ be an initial algebra. By definition, $ \catam{\In} $ is the unique morphism $ \Initalg F \to \Initalg F $ that makes the following diagram commute
	\begin{center}
		\begin{tikzcd}
			F (\Initalg F) \arrow[r, "\In"] \arrow[d, "F \catam \In"] & \Initalg F \arrow[d, "\catam \In"]\\
			F (\Initalg F) \arrow[r, "\In"] & \Initalg F\\
		\end{tikzcd}
	\end{center}
	Since $ F(\Id[\Initalg F]) = \Id[F(\Initalg F)] $, the morphism $ \Id[\Initalg F] $ satisfies this property, and therefore $ \catam{\In} = \Id[\Initalg F] $.
\end{solution}

\begin{solution}[\cref{exer:fusion-property}]\label{sol:fusion-property}
	Let $ F : \CC \to \CC $ be an endofunctor and let $ (\Initalg F, \In) $ be an initial algebra. Given $F$-algebras $(C,\phi)$ and $(D,\psi)$ and $ f \in \CHom{\CC}{C}{D} $, we have the following commutative diagrams:
	\begin{center}
		\begin{tikzcd}
			F \Initalg F \arrow[r, "\In"] \arrow[d, "F( \catam{\phi} )"] & \Initalg F \arrow[d, "\catam{\phi}"]\\
			F C \arrow[r, "\phi"] & C
		\end{tikzcd}
		\quad
		\begin{tikzcd}
			F \Initalg F \arrow[r, "\In"] \arrow[d, "F( \catam{\psi} )"] & \Initalg F \arrow[d, "\catam{\psi}"]\\
			F D \arrow[r, "\psi"] & D
		\end{tikzcd}
	\end{center}
	Now, suppose that $ f \circ \phi = \psi \circ F(f) $.

	By definition, $ \catam \psi $ is the unique morphism from $ \Initalg F $ to $ D $ such that 
	\[ \catam{\psi} \circ \In = \psi \circ F(\catam{\psi}). \]
	Therefore, to show that $ \catam \psi = f \circ \catam \phi $, it suffices to show that
	\[ (f \circ \catam{\phi}) \circ \In = \psi \circ F(f \circ \catam{\phi}). \]
	And indeed, we have
	\begin{align*}
		f \circ \catam{\phi} \circ \In &= f \circ \phi \circ F(\catam{\phi})\\
		&= \psi \circ F(f) \circ F(\catam{\phi})\\
		&= \psi \circ F(f \circ \catam{\phi}).
	\end{align*}
	Therefore, $ \catam{\psi} = f \circ \catam{\phi} $.
\end{solution}

\begin{solution}[\cref{exer:initialalg_for_idfun_with_initialob}]\label{sol:initialalg_for_idfun_with_initialob}
	Let $\CC$ be a category with an initial object $\bot$. Let $ F: \CC \to \CC $ be the identity endofunctor.

	Note that $ (\bot, \Id[\bot]) $ is an $ F $-algebra since $ \Id[\bot]: \bot \to \bot $ and $ \bot = F(\bot) $. Now, to show that it is initial, suppose we have another $ F $-algebra $ (X \in \Ob \CC, f: F X \to X) $. By initiality of $ \bot $ in $ \CC $, we have a unique morphism $ g \in \CC(\bot, X) $. To show that $ g $ is a $ F $-algebra morphism, we have to show that the following diagram commutes:
	\begin{center}
		\begin{tikzcd}
			\bot = F(\bot) \arrow[r, "{\Id[\bot]}"] \arrow[d, "g = F(g)"] & \bot \arrow[d, "g"]\\
			X = F(X) \arrow[r, "f"] & X
		\end{tikzcd}
	\end{center}
	Because $ \bot $ is initial, there exists exactly one morphism from $ \bot $ to $ X $. Therefore, $ g = f \circ g $ and $ g $ is an $ F $-algebra morphism. It is also unique, because $ \bot $ is initial in $ \CC $. Therefore, $ (\bot, \Id[\bot]) $ is an initial $ F $-algebra.
\end{solution}

% Let $F:\CC\to\CC\to\CC$ be a bifunctor such that for any object $A\in\CC$, the initial algebra for the functor induced by 
% \[
% F_A : \CC\to\CC : X\mapsto F(A,X),
% \]
% exists. Show how
% \[
% \Ob{\CC} \to \Ob{\CC} : A\mapsto \mu F_A ,
% \]
% induces a functor.

\begin{solution}[\cref{exer:list-concat-nil}]\label{sol:list-concat-nil}
  We assume that list concatenation |(++) :: [a] -> [a] -> [a]| was defined by recursion on the \emph{first} argument.
  This means that, for any |l :: [a]|, we define |(++ l) :: [a] -> [a]| as |(++ l) = fold cons l|.

  The equation |nil ++ l = l| then follows by definition: |nil ++ l = (fold cons l) nil = l|.

  Let's show |l ++ nil = l|.
  We have that |l ++ nil = (fold cons nil) l| by the definition of |(++ nil)|.
  We know that $[\cons,\nil] = \In$, the initial algebra for the list functor.
  Thus, by \cref{exer:in_catamorphism_id}, |(fold cons nil) = id| is the identity function on lists.
  We thus have |l ++ nil = (fold cons nil) l = id l = l|.

  When |(++) : [a] -> [a] -> [a]| is defined by recursion on the \emph{second} argument, both equations hold as well, with their proofs swapped compared to those given above.
\end{solution}


\begin{solution}[\cref{exer:initialalg_for_bifunctor_functor}]\label{sol:initialalg_for_bifunctor_functor}
	Let $F:\CC\to\CC\to\CC$ be a bifunctor such that for any object $A\in\CC$, the initial algebra $ (\Initalg{F_A}, \In_A) $ for the functor induced by 
	\[ F_A : \CC\to\CC : X \mapsto F(A,X), \]
	exists.
	
	We define a functor $ G: \CC \to \CC $ by $ G(A) = \Initalg{F_A} $. For $ A, B \in \Ob\CC $, we have an initial $ F_A $-algebra $ (\Initalg{F_A}, \In_A: F_A(\Initalg{F_A}) \to \Initalg{F_A}) $ and an initial $ F_B $-algebra $ (\Initalg{F_B}, \In_B: F_B(\Initalg{F_B}) \to \Initalg{F_B}) $. Now, for all $ f \in \CC(A, B) $, we have by the bifunctoriality of $ F $, a morphism
	\[ F(\_, \Initalg{F_B})(f): F_A(\Initalg{F_B}) = F(A, \Initalg{F_B}) \to F(B, \Initalg{F_B}) = F_B(\Initalg{F_B}). \]
	Then $ (\Initalg{F_B}, \In_B \circ F(\_, \Initalg{F_B})(f): F_A(\Initalg{F_B}) \to \Initalg{F_B}) $ is an $ F_A $-algebra, so by the initiality of $ \Initalg{F_A} $, we have a unique morphism $ f^\prime: \Initalg{F_A} \to \Initalg{F_B} $ such that 
	\[ \In_B \circ F(\_, \Initalg{F_B})(f) \circ F_A(f^\prime) = f^\prime \circ \In_A \]
	and we set $ G(f) = f^\prime $.
	
	We now check that $ G $ is a functor. To show that, we need to show that for all $ A \in \Ob \CC $, $ G(\Id[A]) = \Id[\Initalg{F_A}] $ and for all $ f \in \CC(A, B) $ and $ g \in \CC(B, C) $, $ G(g \circ f) = G(g) \circ G(f) $.

	For the first property, given an object $ A \in \Ob \CC $, $ G(\Id[A]): \Initalg{F_A} \to \Initalg{F_A} $ is the unique morphism such that
	\[ \In_A \circ F(\_, \Initalg{F_A})(\Id[A]) \circ F_A(G(\Id[A])) = G(\Id[A]) \circ \In_A. \]
	Hence, to show that $ G(\Id[A]) = \Id[\Initalg{F_A}] $ holds, it suffices to show 
	\[ \In_A \circ F(\_, \Initalg{F_A})(\Id[A]) \circ F_A(\Id[\Initalg{F_A}]) = \Id[\Initalg{F_A}] \circ \In_A. \]
	This indeed follows by the following computation:
	\begin{align*}
		\In_A \circ F(\_, \Initalg{F_A})(\Id[A]) \circ F_A(\Id[\Initalg{F_A}]) &= \In_A \circ \Id[F_A(\Initalg{F_A})] \circ \Id[F_A(\Initalg{F_A})]\\
		&= \In_A\\
		&= \Id[\Initalg{F_A}] \circ \In_A,
	\end{align*}

	For the second property, given objects $ A, B, C \in \Ob \CC $, and $ f: \CC(A, B) $ and $ g: \CC(B, C) $, we have that
	\[ \In_B \circ F(\_, \Initalg{F_B})(f) \circ F_A(G(f)) = G(f) \circ \In_A \]
	and
	\[ \In_C \circ F(\_, \Initalg{F_C})(g) \circ F_B(G(g)) = G(g) \circ \In_B, \]
	and we know that $ G(g \circ f): \Initalg{F_A} \to \Initalg{F_C} $ is the unique morphism such that
	\[ \In_C \circ F(\_, \Initalg{F_C})(g \circ f) \circ F_A(G(g \circ f)) = G(g \circ f) \circ \In_A. \]
	Note that $ F $ is a bifunctor, and therefore, the following diagram commutes:
	\begin{center}
		\begin{tikzcd}
			F(A, \Initalg{F_B}) \arrow[rr, "{F(\_, \Initalg{F_B})(f)}"] \arrow[d, "{F(A, \_)(G(g))}"'] && F(B, \Initalg{F_B}) \arrow[d, "{F(B, \_)(G(g))}"]\\
			F(A, \Initalg{F_C}) \arrow[rr, "{F(\_, \Initalg{F_C})(f)}"] && F(B, \Initalg{F_C})
		\end{tikzcd}
	\end{center}
	Then we have the following equality:
	\begin{align*}
		& \In_C \circ F(\_, \Initalg{F_C})(g \circ f) \circ F_A(G(g) \circ G(f))\\
		=& \In_C \circ F(\_, \Initalg{F_C})(g) \circ F(\_, \Initalg{F_C})(f) \circ F_A(G(g)) \circ F_A(G(f))\\
		=& \In_C \circ F(\_, \Initalg{F_C})(g) \circ F_B(G(g)) \circ F(\_, \Initalg{F_B})(f) \circ F_A(G(f))\\
		=& G(g) \circ \In_B \circ F(\_, \Initalg{F_B})(f) \circ F_A(G(f))\\
		=& G(g) \circ G(f) \circ \In_A.
	\end{align*}
	Therefore, $ G(g \circ f) = G(g) \circ G(f) $.
\end{solution}

\begin{solution}[\cref{exer:conatural_numbers_terminal_coalgebra}] \label{sol:conatural_numbers_terminal_coalgebra}
	Let $ F: \SET \to \SET $ be the functor induced by $ X \mapsto 1 + X $ with $ 1 = \{ \star \} $.
	We claim that $ (\mathbb N^c, f) $ is a terminal coalgebra for this functor, with $ \mathbb N^c = \mathbb N + \{ \infty \} $ and $ f: \mathbb N + \{ \infty \} \to 1 + \mathbb N + \{ \infty \} $ given by
	\begin{align*}
		0 &\mapsto \star\\
		s(n) &\mapsto n\\
		\infty &\mapsto \infty
	\end{align*}
	We need to show that for all $ F $-coalgebras $ (X, g) $, there exists a unique $ F $-coalgebra morphism $ \varphi: (X, g) \to (\mathbb N^c , f) $. To this end, take an arbitrary $ F $-coalgebra $ (X, g) $.

	We first show existence. Borrowing some notation from monads, given the morphism $ g: X \to F X $, we write $ g^* $ for the induced morphism $ g^*: F X \to F X $ and we write $ (g^*)^n = g^* \circ g^* \circ \dots \circ g^* $. We define $ \varphi: X \to \mathbb N^c $ as follows: For $ x \in X $, if for some $ n \in \mathbb N $, $ (g^*)^n(x) \in X $ and $ (g^*)^{s(n)}(x) = \star $, we set $ \varphi(x) = n $. Else, we set $ \varphi(x) = \infty $. We need to show that the following diagram commutes:
	\begin{center}
		\begin{tikzcd}
			X \arrow[r, "g"] \arrow[d, "\varphi"] & 1 + X \arrow[d, "{\Id[1] + \varphi}"]\\
			\mathbb N + \{ \infty \} \arrow[r, "f"] & 1 + \mathbb N + \{ \infty \}
		\end{tikzcd}
	\end{center}
	To that end, take $ x \in X $. Suppose that $ (\Id[1] + \varphi)(g(x)) = \star $. Then $ g^1(x) = \star $, so $ \varphi(x) = 0 $ and $ f(\varphi(x)) = \star $. Suppose that $ (\Id[1] + \varphi)(g(x)) = \infty $. Then (by the definition of $ \varphi $) for all $ n \in \mathbb N $, $ (g^*)^{s(n)} = (x)(g^*)^n(g(x)) \in X $, so $ \varphi(x) = \infty $ and $ f(\varphi(x)) = \infty $. Lastly, suppose that $ (\Id[1] + \varphi)(g(x)) = n $. Then (by the definition of $ \varphi $), $ (g^*)^{s(n)}(x) = (g^*)^{n}(g(x)) \in X $ and $ (g^*)^{s(s(n))}(x) = (g^*)^{s(n)}(g(x)) = \star $. By the definition of $ \varphi $, we then have $ \varphi(x) = s(n) $. Then $ f(\varphi(x)) = n $ and we conclude that the diagram commutes and $ \varphi $ is a $ F $-coalgebra morphism.

	For uniqueness, suppose that we also have a morphism $ \psi: X \to \mathbb N^c $ that makes the diagram commute.
	
	Suppose that for some $ x \in X $, $ g(x) = \star $. Then, to make the diagram commute, we must have $ f(\psi(x)) = (\Id[1] + \psi)(\star) = \star $, so by the definition of $ f $, we must have $ \psi(x) = 0 $.

	By induction on $ n $, we will show that for all $ x \in X $, if $ (g^*)^n(x) \in X $ and $ (g^*)^{s(n)} = \star $, we have $ \psi(x) = n $ (which equals $ \varphi(x) $). Since we just showed the case for $ n = 0 $, we will now show the induction step: suppose that it holds for some $ n $. Take $ x \in X $. If $ (g^*)^n(g(x)) = (g^*)^{s(n)}(x) \in X $ and $ (g^*)^{s(n)}(g(x)) = (g^*)^{s(s(n))}(x) = \star $, we have $ \psi(g(x)) = n $. Then we have $ f(\psi(x)) = (\Id[1] + \psi)(g(x)) = n $. Therefore, $ f(\psi(x)) = s(n) $, which proves the induction step.

	Now, take $ x \in X $ and suppose that for all $ n \in \mathbb N $, $ (g^*)^n(x) \in X $. If $ \psi(x) = n $ for some $ n $, then (since the diagram commutes), we have $ \psi(g(x)) = f(\psi(x)) = f(n) = n - 1 $. Repeating this $ n $ times, we have $ (\Id[1] + \psi)((g^*)^n(x)) = 0 $. We take $ x^\prime = (g^*)^n(x) \in X $. We have $ \psi(x^\prime) = 0 $ and $ f(x^\prime) = \star $. However, $ g(x^\prime) \in X $, so $ (\Id[1] + \varphi)(g(x^\prime)) \not = \star $ and the diagram does not commute. Therefore, we cannot have $ \psi(x) \in \mathbb N $, so $ \psi(x) = \infty = \varphi(x) $.

	Therefore, $ \psi = \varphi $ and we conclude that $ \varphi $ is unique, so $ (\mathbb N^c, f) $ is a terminal $ F $-coalgebra.
\end{solution}

\begin{solution}[\cref{exer:stream-of-nats}]\label{sol:stream-of-nats}

	We wish to define $h,t : \NN\to \NN$ such that the following diagram commutes:
	\begin{center}
	\begin{tikzcd}
	\NN \arrow[rr, "{\langle h, t \rangle}"] \arrow[d, swap, "\nats"] && \NN \times \NN \arrow[d, "\Id \times \nats"] \\
	\Stream(\NN) \arrow[rr, swap, "{\langle \head, \tail \rangle}"] && {\NN\times\Stream(\NN)}
	\end{tikzcd}
	\end{center}
	
	This means:
	\begin{align}
	\co{\nats}{\head} &= h \label{eqn:streams_nats_eq1} \\
	\co{\nats}{\tail} &= \co{t}{\nats} \label{eqn:streams_nats_eq2} 
	\end{align}
	
	By definition of $\nats$, \cref{eqn:streams_nats_eq1} means
	\[
	\forall n : \NN: n = \head(\nats(n)) = h(n),
	\]
	and \cref{eqn:streams_nats_eq2} means
	\[
	\forall n : \nats(n+1) = \tail(\nats(n)) = \nats(t(n)).
	\]
	Hence, we define (as candidates)
	\[
	h = \Id[\NN], \quad t = \Succ.
	\]
	By construction, we have that \cref{eqn:streams_nats_eq1} and \cref{eqn:streams_nats_eq2} indeed holds for $h := \Id[\NN]$ and $t := \Succ$, which shows that the sought function $\nats : \NN \to \Stream(\NN)$ is the unique solution of the equation system
  \begin{align*}
    \co {\nats} \head  &= \Id
    \\
    \co {\nats} \tail &= \co \Succ {\nats}
  \end{align*}  
  
% head  nats = id
% tail  nats
% = nats  succ,
  and thus can be defined as the anamorphism $\anam{ \langle \Id, \Succ \rangle }$.
  %Draw a diagram to convince yourself that this is correct.
\end{solution}

\begin{solution}[\cref{exer:zip}]\label{sol:zip}

We wish to define $h : \Stream(A)\times\Stream(B)\to A\times B$ and $t: \Stream(A)\times\Stream(B)\to \Stream(A)\times \Stream(B)$ such that the following diagram commutes:
	\begin{center}
	\begin{tikzcd}
	\Stream(A)\times \Stream(B)
		\arrow[rr, "{\langle h, t \rangle}"] 
		\arrow[d, swap, "\zip"] 
	&& 
	A\times B\times \Stream(A)\times \Stream(B)
		\arrow[d, "\Id \times \zip"] \\
	\Stream(A\times B) 
		\arrow[rr, swap, "{\langle \head, \tail \rangle}"] 
	&& 
	{\Stream(A\times B)}
	\end{tikzcd}
	\end{center}
	
	This means:
	\begin{align}
	\co{\zip}{\head} &= h \label{eqn:streams_zip_eq1} \\
	\co{\zip}{\tail} &= \co{t}{\zip} \label{eqn:streams_zip_eq2} 
	\end{align}
	
	By definition of $\zip$, \cref{eqn:streams_zip_eq1} means
	\[
	\forall as : \Stream(A), bs : \Stream(B): (\head(as),\head(bs)) = \head(\zip(as,bs)) = h(as,bs),
	\]
	and \cref{eqn:streams_zip_eq2} means
	\[
	\forall as : \Stream(A), bs : \Stream(B): \zip (\tail(as),\tail(bs)) = \tail(\zip(as,bs)) = \zip (t(as,bs)).
	\]
	Hence, we define (as candidates)
	\[
	h = \head\times\head, \quad t = \tail\times\tail.
	\]
	By construction, we have that \cref{eqn:streams_zip_eq1} and \cref{eqn:streams_zip_eq2} indeed holds for $h := \head\times\head$ and $t := \tail\times\tail$, 

  which shows that the sought function $\zip : \Stream(A) \times \Stream(B) \to \Stream(A\times B)$ is the unique solution to the equation system
  \begin{align*}
    \co \zip \head = \head\times\head
    \\
    \co \zip \tail = \co{(\tail\times\tail)}{\zip}
  \end{align*}
  This function can, therefore, be defined as $\anam{ {\langle \head \times \head, \tail \times \tail \rangle} }$.
  %Draw a diagram to convince yourself that this is correct.
\end{solution}


%%% Local Variables:
%%% mode: latex
%%% TeX-master: "CT4P"
%%% End:
